# 네트워크의 기본은 TCP/IP
HTTP를 이해하기 위해서는 TCP/IP 프로토콜에 대해 어느 정도 알고 있어야 할 필요가 있습니다.  
인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 TCP/IP라는 프로토콜에서 움직이고 있습니다.  
HTTP도 그중 하나입니다.  
## 계층으로 관리하는 TCP/IP
TCP/IP에서 중요한 개념중 하나가 계층 입니다.  
TCP/IP는 애플리케이션 계층, 트랜스포트 계층, 네트워크 계층, 링크 계층 이렇게 4계층으로 나뉘어 있습니다.  
### 애플리케이션 계층
애플리케이션 계층은 유저에게 제공되는 애플리케이션에서 사용되는 통신의 움직임을 결정합니다.  
### 트랜스포트 계층
트랜스포트 계층은 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공합니다.  
트랜스포트 계층에서는 서로 다른 성질을 가진 tcp와 udp로 두가지 프로토콜이 있습니다.  
### 네트워크 계층
네트워크 계층은 네트워크 상에서 패킷의 이동을 다룹니다.  
패킷이란 전송하는 데이터의 최소 단위입니다.  
이 계층에서는 어떠한 경로를 거쳐 상대의 컴퓨터까지 보낼지를 결정하기도 합니다.  
### 링크 계층
네트워크에 접속하는 하드웨어적인 면을 다룹니다.  
운영체제가 하드웨어를 제어하기 떄문에 디바이스 드라이버랑 네트워크 인터페이스 카드를 포함합니다.  
그리고 케이블 등과 같이 물리적으로 보이는 부분도 포함합니다.  
하드웨어적 측면은 모두 링크 계층의 역할입니다.  
### 통신흐름
TCP/IP로 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 합니다.  
송신하는 측은 애플리케이션 계층에서부터 내려가고 수신하는 측은 애플리케이션 계층으로 올라갑니다.  
1. 애플리케이션 계층에서 어느 웹 페이지를 보고 싶다라는 HTTP Request를 지시합니다.  
2. 그 다음에 있는 트랜스포트 계층에서는 애플리케이션 계층에서 받은 데이터를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달합니다.  
3. 네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해서 링크 계층에 전달합니다.  
즉 송신될 땐 필요한 정보가 붙어서 내려가고 수신될 땐 하나씩 까면서 올라갑니다.  
이렇게 정보를 감싸는것을 캡슐화 라고 합니다.  
### 배송을 담당하는 IP
- IP 주소랑 Internet Protocol이랑은 다른 개념
- IP의 역할은 개개의 패킷을 상대방에게 전달하는 것. 하지만 상대방에게 전달하기까지 여러 가지 요소가 필요한데 그 중에서도 IP 주소와 MAC주소가 중요하다.  
- IP 주소는 각 노드에 부여된 주소를 가리키고 MAC 주소는 각 네트워크 카드에 할당된 고유 주소  
- MAC주소와 IP주소는 서로 연관되어 있고 IP 주소는 변경 가능하지만 MAC은 변경할 수 없다.  
### 통신은 ARP를 이용하여 MAC 주소에서 한다.  
IP 주소를 MAC 주소로 바꿔주는 ARP 프로토콜도 계층형주소 특징을 이용해 그 주소로 찾아가 MAC 주소를 알아온다.  
목적지에 도달했으면 자기가 속한 네트워크에 있는 모든 PC에게 말한다.  
"A IP를 가진 분 저한테 MAC주소좀 보내주세요"  
이렇게 확성기마냥 들어온 포트를 제외한 전체에 뿌려 물어보는걸 플루딩이라고 하고 맥 주소를 알아내기 위해 이렇게 동작하는 프로토콜이  
ARP 이다.  
### 신뢰성을 담당하는 TCP (트랜스포트 계층)
- 신뢰성 있는 바이트 스트림 서비스를 제공한다.  
#### 바이트 스트림 서비스란
용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것을 말하고, 신뢰성 있는 서비스는 상대방에게 보내는 서비스를 의미합니다.  
결국 TCP는 대용량의 데이터를 보내기 쉽게 작게 분해하여 상대방에게 보내고 정확하게 도착했는지 확인하는 역할을 담당하고 있다.  
### 신뢰성 있는 연결은 3-way-handshaking
tcp는 신뢰성을 보장하는 프로토콜이라고 했다.  
그 중에서 연결 확립을 보장하는 3-way-handshaking이 있다.  
이 방법은 패킷을 보내고 나서 바로 끝내는 것이 아니라, 보내졌는지 여부를 상대방에게 확인한다.  
이것은 SYN, ACK라는 TCP 플래그를 사용한다.  
1. 송신측에서 최초로 SYN 패킷을 상대방에게 전송한다.  
2. 수신측에서 패킷을 받았으면 SYN + ACK 패킷을 다시 송신자에게 전송한다.  
3. 제대로 받았음을 확인한 송신측에서는 ACK 패킷을 다시 한번 보내 패킷 교환이 완료되었음을 전한다.  
이 외에도 통신의 신뢰성을 보장하기 위해서 다른 여러가지 시스템을 가지고 있다.  
### DNS
컴퓨터의 주소는 IP 주소입니다.  
하지만 이는 인간이 알아보기 힘든 형태로 되어있는데요 이를 해결하기 위해 IP 주소에 인간이 알아볼 수 있는 이름을 붙일 수 있는 방법이 있습니다.  
DNS(Domain Name System)는 DNS서버에 해당 이름을 주게되면(eg. www.naver.com) 그 이름에 맞는 ip 주소를 반환해줍니다.  
### URI
리소스 식별자를 말한다.  
#### 
## 전체 흐름
![무제](https://user-images.githubusercontent.com/23313008/176675192-f0a880c4-5e2b-4e86-a4df-c1c14620fa9a.png)  
